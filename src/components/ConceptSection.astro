---
// Sección Concepto - Explicar QUÉ ES y CÓMO FUNCIONA
// Layout 50/50 en desktop, stack en mobile
---

<section id="concepto" class="py-20 lg:py-28 px-4 bg-section relative overflow-hidden">
  <!-- Glow decorativo -->
  <div class="absolute -top-40 -right-40 w-[500px] h-[500px] bg-cyan/5 rounded-full blur-[120px] pointer-events-none"></div>
  <div class="absolute -bottom-40 -left-40 w-[400px] h-[400px] bg-blue/5 rounded-full blur-[100px] pointer-events-none"></div>
  <div class="max-w-7xl mx-auto w-full">
    <div class="grid lg:grid-cols-2 gap-12 lg:gap-20 items-center">
      
      <!-- Visual izquierda - Video (en móvil va después del texto) -->
      <div class="relative animate-on-scroll order-2 lg:order-1">
        <div class="relative rounded-2xl overflow-hidden shadow-2xl">
          <video
            autoplay
            muted
            loop
            playsinline
            class="w-full h-auto rounded-2xl"
            poster="https://hydro-charger.com/wp-content/uploads/2019/12/hydro-charguer-14_webshop-1.jpg"
          >
            <source src="/video/hydro-charger.mp4" type="video/mp4" />
          </video>
          <!-- Glow effect -->
          <div class="absolute inset-0 bg-gradient-to-tr from-cyan/10 to-transparent pointer-events-none rounded-2xl"></div>
        </div>
      </div>

      <!-- Contenido derecha (en móvil va primero) -->
      <div class="lg:pl-4 order-1 lg:order-2">
        <!-- Label -->
        <div class="mb-6 animate-on-scroll">
          <span class="text-cyan text-sm font-semibold tracking-wider uppercase">
            Cómo funciona
          </span>
        </div>

        <!-- Headline -->
        <h2 class="font-serif text-4xl sm:text-5xl lg:text-6xl mb-8 leading-[1.1] animate-on-scroll">
          Mientras tu velero corta el agua, tú generas energía
        </h2>

        <!-- Description -->
        <p class="text-lg lg:text-xl text-gray-400 mb-12 leading-relaxed animate-on-scroll">
          Su fácil manejo, peso ligero de solo 8 kg y precio asequible lo hacen rentable 
          incluso para embarcaciones más pequeñas. La inclinación del soporte se ajusta 
          una sola vez y ya queda listo para siempre.
        </p>

        <!-- 3 Specs Destacadas -->
        <div class="grid grid-cols-3 gap-4 animate-on-scroll">
          <div class="text-center p-4 bg-gray-900/30 rounded-xl border border-gray-800/50">
            <div class="text-2xl lg:text-3xl font-bold text-cyan mb-1">3 kn</div>
            <div class="text-gray-400 text-sm">Velocidad mínima</div>
          </div>
          <div class="text-center p-4 bg-gray-900/30 rounded-xl border border-gray-800/50">
            <div class="text-2xl lg:text-3xl font-bold text-cyan mb-1">500W</div>
            <div class="text-gray-400 text-sm">Potencia máxima</div>
          </div>
          <div class="text-center p-4 bg-gray-900/30 rounded-xl border border-gray-800/50">
            <div class="text-2xl lg:text-3xl font-bold text-cyan mb-1">8 kg</div>
            <div class="text-gray-400 text-sm">Peso total</div>
          </div>
        </div>
      </div>

    </div>

    <!-- Grid de 4 fotos (360x490 - formato vertical) -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-16 lg:mt-24 animate-on-scroll">
      <button class="overflow-hidden rounded-xl group bg-gray-900/30 cursor-pointer lightbox-trigger" data-src="/img/gallery/hydro-1.jpeg">
        <img 
          src="/img/gallery/hydro-1.jpeg" 
          alt="Hydro Charger en acción"
          class="w-full aspect-[360/490] object-contain group-hover:scale-105 transition-transform duration-500"
          loading="lazy"
        />
      </button>
      <button class="overflow-hidden rounded-xl group bg-gray-900/30 cursor-pointer lightbox-trigger" data-src="/img/gallery/hydro-2.jpeg">
        <img 
          src="/img/gallery/hydro-2.jpeg" 
          alt="Instalación Hydro Charger"
          class="w-full aspect-[360/490] object-contain group-hover:scale-105 transition-transform duration-500"
          loading="lazy"
        />
      </button>
      <button class="overflow-hidden rounded-xl group bg-gray-900/30 cursor-pointer lightbox-trigger" data-src="/img/gallery/hydro-3.jpeg">
        <img 
          src="/img/gallery/hydro-3.jpeg" 
          alt="Hydro Charger bajo el agua"
          class="w-full aspect-[360/490] object-contain group-hover:scale-105 transition-transform duration-500"
          loading="lazy"
        />
      </button>
      <button class="overflow-hidden rounded-xl group bg-gray-900/30 cursor-pointer lightbox-trigger" data-src="/img/gallery/hydro-4.jpeg">
        <img 
          src="/img/gallery/hydro-4.jpeg" 
          alt="Detalle Hydro Charger"
          class="w-full aspect-[360/490] object-contain group-hover:scale-105 transition-transform duration-500"
          loading="lazy"
        />
      </button>
    </div>
  </div>
</section>

<!-- Lightbox Modal -->
<div id="lightbox" class="fixed inset-0 z-50 hidden items-center justify-center p-4 md:p-8">
  <!-- Backdrop oscuro -->
  <div id="lightbox-backdrop" class="absolute inset-0 bg-dark/95 backdrop-blur-sm"></div>
  
  <!-- Contenido -->
  <div class="relative z-10 max-w-4xl max-h-[90vh] animate-fade-in">
    <!-- Botón cerrar -->
    <button id="lightbox-close" class="absolute -top-12 right-0 text-gray-400 hover:text-white transition-colors p-2">
      <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
    
    <!-- Imagen -->
    <img id="lightbox-img" src="" alt="" class="max-w-full max-h-[85vh] object-contain rounded-2xl shadow-2xl" />
  </div>
  
  <!-- Navegación -->
  <button id="lightbox-prev" class="absolute left-4 md:left-8 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-gray-800/80 hover:bg-cyan/20 border border-gray-700 hover:border-cyan/50 flex items-center justify-center transition-all">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
  </button>
  <button id="lightbox-next" class="absolute right-4 md:right-8 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-gray-800/80 hover:bg-cyan/20 border border-gray-700 hover:border-cyan/50 flex items-center justify-center transition-all">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </button>
</div>

<script>
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img') as HTMLImageElement;
  const lightboxClose = document.getElementById('lightbox-close');
  const lightboxBackdrop = document.getElementById('lightbox-backdrop');
  const lightboxPrev = document.getElementById('lightbox-prev');
  const lightboxNext = document.getElementById('lightbox-next');
  const triggers = document.querySelectorAll('.lightbox-trigger');
  
  const images = Array.from(triggers).map(t => t.getAttribute('data-src') || '');
  let currentIndex = 0;

  function openLightbox(index: number) {
    currentIndex = index;
    lightboxImg.src = images[currentIndex];
    lightbox?.classList.remove('hidden');
    lightbox?.classList.add('flex');
    document.body.style.overflow = 'hidden';
  }

  function closeLightbox() {
    lightbox?.classList.add('hidden');
    lightbox?.classList.remove('flex');
    document.body.style.overflow = '';
  }

  function navigate(direction: number) {
    currentIndex = (currentIndex + direction + images.length) % images.length;
    lightboxImg.src = images[currentIndex];
  }

  triggers.forEach((trigger, index) => {
    trigger.addEventListener('click', () => openLightbox(index));
  });

  lightboxClose?.addEventListener('click', closeLightbox);
  lightboxBackdrop?.addEventListener('click', closeLightbox);
  lightboxPrev?.addEventListener('click', () => navigate(-1));
  lightboxNext?.addEventListener('click', () => navigate(1));

  document.addEventListener('keydown', (e) => {
    if (lightbox?.classList.contains('hidden')) return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowLeft') navigate(-1);
    if (e.key === 'ArrowRight') navigate(1);
  });
</script>

